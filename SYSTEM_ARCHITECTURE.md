# ğŸ—ï¸ Bokex System Architecture

## Complete System Overview

---

## ğŸ“Š High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BOKEX PLATFORM                          â”‚
â”‚                  Smart Hotel Booking for Kenya                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
                â–¼                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   FRONTEND    â”‚ â”‚   BACKEND   â”‚ â”‚   EMAILS    â”‚
        â”‚  React + TS   â”‚ â”‚  Supabase   â”‚ â”‚    SMTP     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–¥ï¸ Frontend Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (React)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Guest Portal  â”‚  â”‚ Partner Portal â”‚  â”‚ Admin Portal  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ Search       â”‚  â”‚ â€¢ Dashboard    â”‚  â”‚ â€¢ Analytics   â”‚ â”‚
â”‚  â”‚ â€¢ Browse       â”‚  â”‚ â€¢ Properties   â”‚  â”‚ â€¢ Users Mgmt  â”‚ â”‚
â”‚  â”‚ â€¢ Book         â”‚  â”‚ â€¢ Bookings     â”‚  â”‚ â€¢ Payments    â”‚ â”‚
â”‚  â”‚ â€¢ Pay          â”‚  â”‚ â€¢ Calendar     â”‚  â”‚ â€¢ Approvals   â”‚ â”‚
â”‚  â”‚ â€¢ Review       â”‚  â”‚ â€¢ Messages     â”‚  â”‚ â€¢ Reports     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           API Client (/src/utils/api.ts)             â”‚   â”‚
â”‚  â”‚  â€¢ auth API      â€¢ bookings API    â€¢ payments API    â”‚   â”‚
â”‚  â”‚  â€¢ reviews API   â€¢ messages API    â€¢ properties API  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTPS Requests
                               â–¼
```

---

## âš™ï¸ Backend Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKEND (Supabase Edge Functions)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Hono Web Server (index.tsx)                   â”‚   â”‚
â”‚  â”‚  Route: /make-server-e0651789/*                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  ğŸ“ AUTH ROUTES                                       â”‚   â”‚
â”‚  â”‚  â€¢ POST /auth/register                               â”‚   â”‚
â”‚  â”‚  â€¢ POST /auth/register-partner                       â”‚   â”‚
â”‚  â”‚  â€¢ POST /auth/login                                  â”‚   â”‚
â”‚  â”‚  â€¢ GET  /auth/user/:email                            â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  ğŸ“ BOOKING ROUTES                                    â”‚   â”‚
â”‚  â”‚  â€¢ POST   /bookings                                  â”‚   â”‚
â”‚  â”‚  â€¢ GET    /bookings                                  â”‚   â”‚
â”‚  â”‚  â€¢ GET    /bookings/user/:email                      â”‚   â”‚
â”‚  â”‚  â€¢ GET    /bookings/partner/:email                   â”‚   â”‚
â”‚  â”‚  â€¢ GET    /bookings/:bookingId                       â”‚   â”‚
â”‚  â”‚  â€¢ PUT    /bookings/:bookingId                       â”‚   â”‚
â”‚  â”‚  â€¢ DELETE /bookings/:bookingId                       â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  ğŸ“ PAYMENT ROUTES                                    â”‚   â”‚
â”‚  â”‚  â€¢ POST /payments                                    â”‚   â”‚
â”‚  â”‚  â€¢ POST /payments/verify                             â”‚   â”‚
â”‚  â”‚  â€¢ GET  /payments                                    â”‚   â”‚
â”‚  â”‚  â€¢ GET  /payments/booking/:bookingId                 â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  ğŸ“ PROPERTY ROUTES                                   â”‚   â”‚
â”‚  â”‚  â€¢ POST /properties                                  â”‚   â”‚
â”‚  â”‚  â€¢ GET  /properties                                  â”‚   â”‚
â”‚  â”‚  â€¢ GET  /properties/partner/:email                   â”‚   â”‚
â”‚  â”‚  â€¢ GET  /properties/:propertyId                      â”‚   â”‚
â”‚  â”‚  â€¢ PUT  /properties/:propertyId                      â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  ğŸ“ REVIEW & MESSAGE ROUTES                           â”‚   â”‚
â”‚  â”‚  ğŸ“ STATS & USER MANAGEMENT ROUTES                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Database Layer (database.tsx)                   â”‚   â”‚
â”‚  â”‚  â€¢ User operations    â€¢ Partner operations           â”‚   â”‚
â”‚  â”‚  â€¢ Booking CRUD       â€¢ Payment processing           â”‚   â”‚
â”‚  â”‚  â€¢ Property CRUD      â€¢ Reviews & messages           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
```

---

## ğŸ—„ï¸ Database Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SUPABASE POSTGRESQL                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ‘¥ users                    ğŸ¨ partners                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ id (UUID)        â”‚       â”‚ id (UUID)        â”‚           â”‚
â”‚  â”‚ user_id (TEXT)   â”‚       â”‚ partner_id       â”‚           â”‚
â”‚  â”‚ full_name        â”‚       â”‚ business_name    â”‚           â”‚
â”‚  â”‚ email (UNIQUE)   â”‚â—„â”€â”€â”   â”‚ email (UNIQUE)   â”‚â—„â”€â”€â”       â”‚
â”‚  â”‚ phone            â”‚   â”‚   â”‚ first_name       â”‚   â”‚       â”‚
â”‚  â”‚ password_hash    â”‚   â”‚   â”‚ last_name        â”‚   â”‚       â”‚
â”‚  â”‚ role             â”‚   â”‚   â”‚ city, county     â”‚   â”‚       â”‚
â”‚  â”‚ registered_at    â”‚   â”‚   â”‚ registered_at    â”‚   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚                         â”‚                          â”‚       â”‚
â”‚  ğŸ  properties          â”‚   ğŸ“… bookings            â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚ id (UUID)        â”‚  â”‚   â”‚ id (UUID)        â”‚  â”‚       â”‚
â”‚  â”‚ property_id      â”‚  â”‚   â”‚ booking_id (BKX) â”‚  â”‚       â”‚
â”‚  â”‚ owner_email â”€â”€â”€â”€â”€â”¼â”€â”€â”˜   â”‚ guest_email â”€â”€â”€â”€â”€â”¼â”€â”€â”˜       â”‚
â”‚  â”‚ property_name    â”‚      â”‚ property_owner â”€â”€â”¼â”€â”€â”       â”‚
â”‚  â”‚ property_type    â”‚      â”‚ hotel_name       â”‚  â”‚       â”‚
â”‚  â”‚ price (KES)      â”‚      â”‚ check_in         â”‚  â”‚       â”‚
â”‚  â”‚ location         â”‚      â”‚ check_out        â”‚  â”‚       â”‚
â”‚  â”‚ amenities (JSON) â”‚      â”‚ total_amount     â”‚  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ status           â”‚  â”‚       â”‚
â”‚                            â”‚ payment_status   â”‚  â”‚       â”‚
â”‚  ğŸ’³ payments               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚            â”‚       â”‚
â”‚  â”‚ id (UUID)        â”‚              â”‚            â”‚       â”‚
â”‚  â”‚ transaction_id   â”‚              â”‚            â”‚       â”‚
â”‚  â”‚ booking_id â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚       â”‚
â”‚  â”‚ mpesa_code       â”‚                           â”‚       â”‚
â”‚  â”‚ amount (KES)     â”‚                           â”‚       â”‚
â”‚  â”‚ status           â”‚                           â”‚       â”‚
â”‚  â”‚ verified_at      â”‚                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚       â”‚
â”‚                                                  â”‚       â”‚
â”‚  â­ reviews                ğŸ’¬ messages           â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚ id (UUID)        â”‚     â”‚ id (UUID)        â”‚ â”‚       â”‚
â”‚  â”‚ review_id        â”‚     â”‚ message_id       â”‚ â”‚       â”‚
â”‚  â”‚ property_owner â”€â”€â”¼â”€â”€â”€â”€â”€â”¤ property_owner â”€â”€â”¼â”€â”˜       â”‚
â”‚  â”‚ hotel_name       â”‚     â”‚ sender_name      â”‚         â”‚
â”‚  â”‚ rating (1-5)     â”‚     â”‚ sender_email     â”‚         â”‚
â”‚  â”‚ comment          â”‚     â”‚ subject          â”‚         â”‚
â”‚  â”‚ user_email       â”‚     â”‚ message          â”‚         â”‚
â”‚  â”‚ created_at       â”‚     â”‚ read (BOOL)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                          â”‚
â”‚  ğŸ”’ Row Level Security (RLS) enabled on ALL tables      â”‚
â”‚  ğŸ“Š Indexes on all foreign keys and search fields       â”‚
â”‚  ğŸ”„ Triggers for auto-updating timestamps               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“§ Email Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EMAIL SERVICE (SMTP)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Server: mail.nacyglobal.com:587                             â”‚
â”‚  From: support@nacyglobal.com                                â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Email Templates (HTML)                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  1ï¸âƒ£ User Registration Welcome                        â”‚   â”‚
â”‚  â”‚     Trigger: User signs up                           â”‚   â”‚
â”‚  â”‚     To: New user email                               â”‚   â”‚
â”‚  â”‚     Contains: User ID, welcome message               â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  2ï¸âƒ£ Partner Registration Welcome                     â”‚   â”‚
â”‚  â”‚     Trigger: Partner signs up                        â”‚   â”‚
â”‚  â”‚     To: New partner email                            â”‚   â”‚
â”‚  â”‚     Contains: Partner ID, dashboard link             â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  3ï¸âƒ£ Property Listing Confirmation                    â”‚   â”‚
â”‚  â”‚     Trigger: Property listed                         â”‚   â”‚
â”‚  â”‚     To: Property owner                               â”‚   â”‚
â”‚  â”‚     Contains: Property ID, next steps                â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  4ï¸âƒ£ Booking Confirmation (Guest)                     â”‚   â”‚
â”‚  â”‚     Trigger: Booking created                         â”‚   â”‚
â”‚  â”‚     To: Guest email                                  â”‚   â”‚
â”‚  â”‚     Contains: Booking details, check-in info         â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  5ï¸âƒ£ Booking Notification (Owner)                     â”‚   â”‚
â”‚  â”‚     Trigger: Booking created                         â”‚   â”‚
â”‚  â”‚     To: Property owner                               â”‚   â”‚
â”‚  â”‚     Contains: Guest info, booking details            â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  6ï¸âƒ£ Payment Confirmation (Guest)                     â”‚   â”‚
â”‚  â”‚     Trigger: Payment verified                        â”‚   â”‚
â”‚  â”‚     To: Guest email                                  â”‚   â”‚
â”‚  â”‚     Contains: Receipt, M-PESA code                   â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  7ï¸âƒ£ Payment Notification (Admin)                     â”‚   â”‚
â”‚  â”‚     Trigger: Payment verified                        â”‚   â”‚
â”‚  â”‚     To: support@nacyglobal.com                       â”‚   â”‚
â”‚  â”‚     Contains: Transaction details                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagrams

### User Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    1. Submit     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    2. Create    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Backend â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Database â”‚
â”‚ (Guest) â”‚                  â”‚  API    â”‚                 â”‚  users   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ 3. Send email
                                  â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   SMTP   â”‚
                            â”‚  Server  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ 4. Deliver
                                  â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  User's  â”‚
                            â”‚  Inbox   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Booking Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  1. Select  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  2. Create  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Frontend â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â”‚ 3. Insert
                                                      â–¼
                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚   bookings   â”‚
                                               â”‚    table     â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚                         â”‚                 â”‚
                      4. Email guest           5. Email owner    6. Return ID
                            â”‚                         â”‚                 â”‚
                            â–¼                         â–¼                 â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Guest   â”‚            â”‚  Owner   â”‚      â”‚ Frontend â”‚
                      â”‚  Inbox   â”‚            â”‚  Inbox   â”‚      â”‚ (Confirm)â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  1. Initiate  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  2. Create   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Backend â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ payments â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  table   â”‚
    â”‚                         â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                         â”‚
    â”‚ 3. STK Push             â”‚ 4. Return code
    â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ M-PESA â”‚               â”‚ Frontendâ”‚
â”‚ Prompt â”‚               â”‚ (Wait)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                         â”‚
    â”‚ 5. Enter PIN            â”‚
    â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  6. Verify    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  7. Update  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Backend â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Database â”‚
â”‚ Enters â”‚               â”‚   API   â”‚             â”‚ (Verify) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 8. Send emails
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
                â–¼             â–¼             â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Guest  â”‚   â”‚  Owner  â”‚   â”‚  Admin  â”‚
          â”‚  (Rcpt) â”‚   â”‚ (Alert) â”‚   â”‚ (Alert) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY LAYERS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1ï¸âƒ£ FRONTEND SECURITY                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ HTTPS only                                         â”‚   â”‚
â”‚  â”‚ â€¢ Input validation                                   â”‚   â”‚
â”‚  â”‚ â€¢ XSS protection                                     â”‚   â”‚
â”‚  â”‚ â€¢ CSRF tokens                                        â”‚   â”‚
â”‚  â”‚ â€¢ Anon key only (public)                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  2ï¸âƒ£ API SECURITY                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ CORS configuration                                 â”‚   â”‚
â”‚  â”‚ â€¢ Rate limiting                                      â”‚   â”‚
â”‚  â”‚ â€¢ Request validation                                 â”‚   â”‚
â”‚  â”‚ â€¢ JWT authentication (future)                        â”‚   â”‚
â”‚  â”‚ â€¢ Service role auth                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  3ï¸âƒ£ DATABASE SECURITY                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Row Level Security (RLS)                           â”‚   â”‚
â”‚  â”‚ â€¢ Service role only writes                           â”‚   â”‚
â”‚  â”‚ â€¢ Public read (filtered)                             â”‚   â”‚
â”‚  â”‚ â€¢ Encrypted connections                              â”‚   â”‚
â”‚  â”‚ â€¢ No direct access                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  4ï¸âƒ£ PASSWORD SECURITY                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ SHA-256 hashing                                    â”‚   â”‚
â”‚  â”‚ â€¢ Never stored plain text                            â”‚   â”‚
â”‚  â”‚ â€¢ Never returned in API                              â”‚   â”‚
â”‚  â”‚ â€¢ One-way encryption                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  5ï¸âƒ£ PAYMENT SECURITY                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ M-PESA STK Push (secure)                           â”‚   â”‚
â”‚  â”‚ â€¢ No card details stored                             â”‚   â”‚
â”‚  â”‚ â€¢ Transaction verification                           â”‚   â”‚
â”‚  â”‚ â€¢ Secure paybill (4005207)                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ID Generation System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UNIQUE ID FORMATS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Bookings:      BKX-17346789ABCD                             â”‚
â”‚  Users:         USR-17346789EFGH                             â”‚
â”‚  Partners:      USR-17346789IJKL  (same format as users)    â”‚
â”‚  Properties:    PROP-17346789MNOP                            â”‚
â”‚  Reviews:       REV-17346789QRST                             â”‚
â”‚  Messages:      MSG-17346789UVWX                             â”‚
â”‚  Transactions:  TXN-1734678900000                            â”‚
â”‚                                                               â”‚
â”‚  Format: PREFIX-TIMESTAMP+RANDOM                             â”‚
â”‚  - Prefix: 3-4 characters (BKX, USR, etc.)                  â”‚
â”‚  - Timestamp: Unix timestamp (ms)                            â”‚
â”‚  - Random: 4-8 random alphanumeric characters               â”‚
â”‚                                                               â”‚
â”‚  Benefits:                                                   â”‚
â”‚  âœ… Globally unique                                          â”‚
â”‚  âœ… Chronologically sortable                                â”‚
â”‚  âœ… Human readable                                           â”‚
â”‚  âœ… Easy to identify type                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PRODUCTION STACK                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  FRONTEND (Static Hosting)                         â”‚     â”‚
â”‚  â”‚  â€¢ React build output                              â”‚     â”‚
â”‚  â”‚  â€¢ Served via CDN                                  â”‚     â”‚
â”‚  â”‚  â€¢ HTTPS enabled                                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                    â”‚
â”‚                          â”‚ API Calls                          â”‚
â”‚                          â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  BACKEND (Supabase Edge Functions)                 â”‚     â”‚
â”‚  â”‚  â€¢ Deno runtime                                    â”‚     â”‚
â”‚  â”‚  â€¢ Hono web server                                 â”‚     â”‚
â”‚  â”‚  â€¢ Auto-scaling                                    â”‚     â”‚
â”‚  â”‚  â€¢ Global distribution                             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                    â”‚
â”‚                          â”‚ Queries                            â”‚
â”‚                          â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  DATABASE (Supabase PostgreSQL)                    â”‚     â”‚
â”‚  â”‚  â€¢ Managed PostgreSQL                              â”‚     â”‚
â”‚  â”‚  â€¢ Automatic backups                               â”‚     â”‚
â”‚  â”‚  â€¢ Point-in-time recovery                          â”‚     â”‚
â”‚  â”‚  â€¢ Connection pooling                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  EMAIL (SMTP Server)                               â”‚     â”‚
â”‚  â”‚  â€¢ mail.nacyglobal.com                             â”‚     â”‚
â”‚  â”‚  â€¢ TLS encryption                                  â”‚     â”‚
â”‚  â”‚  â€¢ Delivery tracking                               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ System Integration Map

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BOKEX WEB   â”‚
                    â”‚   PLATFORM    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
            â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Guest   â”‚   â”‚  Partner  â”‚   â”‚   Admin   â”‚
    â”‚   Portal  â”‚   â”‚  Portal   â”‚   â”‚  Portal   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   API LAYER (Hono)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database    â”‚ â”‚  Email Serviceâ”‚ â”‚   M-PESA     â”‚
â”‚  (Supabase)   â”‚ â”‚    (SMTP)     â”‚ â”‚  (Paybill)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Scalability Architecture

```
Current â†’ Future

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1: MVP (Current)                                     â”‚
â”‚  â€¢ Single database instance                                 â”‚
â”‚  â€¢ Basic edge functions                                     â”‚
â”‚  â€¢ Email notifications                                      â”‚
â”‚  â€¢ Capacity: 1,000-10,000 users                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 2: Growth (Future)                                   â”‚
â”‚  â€¢ Read replicas                                            â”‚
â”‚  â€¢ Redis caching                                            â”‚
â”‚  â€¢ CDN for images                                           â”‚
â”‚  â€¢ Capacity: 10,000-100,000 users                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3: Scale (Future)                                    â”‚
â”‚  â€¢ Database sharding                                        â”‚
â”‚  â€¢ Message queue                                            â”‚
â”‚  â€¢ Microservices                                            â”‚
â”‚  â€¢ Capacity: 100,000+ users                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Â© 2026 Bokex - System Architecture Documentation**
